<!DOCTYPE html>
  <head>
    <meta charset="UTF-8">
    <title>QiMessaging (メモリを監視)</title>
    <script src="libs/qimessaging/1.0/qimessaging.js"></script>
    <script>
      const unaduki = ["っんんっっんん","っっんん","っっんんっんん","へーーーー！！","ほーーーー！！","なるほどー","そうなんですね！！","なるほどーーそうなんですねぇ","っぁーーー","はいー","そうですねぇぇ","じゃあ","っぁぁーーーー","あのぉー","っはぁーーーー","なるほどーー","もう少し質問しても良いですかー？","そーだったんーですねぇ---","っんー","ありがとうございます！！","ありがとうございます！"]
      function toTabletHandler(value) {
        var value = value.replace(/どういうふー/g,'どういうふう');
        var value = value.replace(/やろーと/g,'やろう');
        var value = value.replace(/っ？/g,'');
        var value = value.replace(/ろっで/g,'ろで');
        var value = value.replace(/、/g,'');
        var value = value.replace(/　/g,'');
        var value = value.replace(/ーっ！！/g,'');
        var value = value.replace(/っー！！/g,'');
        var value = value.replace(/ーっ！/g,'');
        var value = value.replace(/っ！/g,'');
        var value = value.replace(/ぁ！！/g,'');
        var value = value.replace(/\\pau=400\\/g,'');
        if (unaduki.indexOf(value) !==-1){
          document.getElementById("memory").innerHTML = "";
        }else{
          document.getElementById("memory").innerHTML = value;
          console.log(value)
        }
        
      }

      function startSubscribe() {
        var session = new QiSession("169.254.159.144");
        console.log(session)
        session.service("ALMemory").done(function (ALMemory) {
          ALMemory.subscriber("ALTextToSpeech/CurrentSentence").done(function(subscriber) {
            subscriber.signal.connect(toTabletHandler);
          });
        });
      }
    </script>
    <link href="html/main.css" rel="stylesheet">
  </head>
  <body onLoad="startSubscribe();">
    <div style="font-size: 7em;text-align: left;">
      <!-- <div style="margin:75px;"> -->
      <div class="wrapper">
        <img src="./images/fukidashi.png" alt="">
        <div class ="space">
          <p id="memory"></p>
        </div>
      </div>
    </div>
  </body>
</html>